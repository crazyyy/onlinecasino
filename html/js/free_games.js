var free={start:function(){free.initFilterToggle(),free.getFilter(),$colThree=$(".filter-data").children(".col:eq(2)").children(".value"),$updateThree=$(".free-games-block").children(".game-block").length,getCount=setInterval(free.updateImagesLoading,100)},initFilterToggle:function(){$form=$("#form_hold"),$form.slideDown("fast")},getFilter:function(){$("#form_hold").on("change","select",function(){$listOne=$("#sort-games").val(),$listTwo=$("#by-software").val(),$listThree=$("#game-type").val(),free.constructFilter($listOne,$listTwo,$listThree)})},constructFilter:function(t,e,a){$.ajax({type:"GET",beforeSend:function(t){t.setRequestHeader("authorize",sessionAuthorize)},url:"ajax/filter_return.html",success:function(a){$(".free-games-block").html(a),free.updateFilterOnScreen(t,e),free.justGetImages(),lightbox.start(),$.ajax({type:"POST",url:"ajax/games_count.html",cache:!1,success:function(t){$(".filter-panel .col:last-child").html(t)}})}})},updateFilterOnScreen:function(t,e){$colOne=$(".filter-data").children(".col:eq(0)"),$colTwo=$(".filter-data").children(".col:eq(1)"),$updateOne=$("#sort-games").find(":selected").text(),$updateTwo=$("#by-software").find(":selected").text(),$updateThree=$("#game-type").find(":selected").text(),$colOne.html("Sorted: "+$updateOne),$colTwo.html("All"==$updateThree?"Filter: "+$updateTwo:"Filters: "+$updateTwo+", "+$updateThree)},getGameCount:function(){$colThree=$(".filter-data").children(".col:eq(2)").children(".value"),$colThree.html($updateThree),$colThree.css({fontWeight:"bold",color:"#090"}),console.log($updateThree)},countImagesLoading:function(){imgCount=0,$img=$(".free-games-block").children(".game-block").children("a").children("img"),$img.one("load",function(){imgCount++})},justGetImages:function(){$filterImg=$(".free-games-block").children(".game-block").children("a").children("img"),$colThree.html($filterImg.length),$colThree.css({fontWeight:"bold",color:"#090"})},resetFilter:function(){}},lightbox={start:function(){lightbox.lightboxHide(),lightbox.initGames(),lightbox.closeLightbox()},initGames:function(){$(document).off("click",".popover").on("click",".popover",function(t){t.preventDefault(),console.log("happening");var e=$(this).attr("name");$.ajax({type:"GET",beforeSend:function(t){t.setRequestHeader("authorize",sessionAuthorize)},url:"ajax/filter_return_id.html",success:function(t){lightbox.createScreen(),lightbox.lightboxShow(),lightbox.appendGame(t),lightbox.addId(e),lightbox.trackClick(e),rating.start()}})})},createScreen:function(){var t=$("<div></div>").attr("id","modalscreen").css({position:"fixed",width:"100%",height:"100%",zIndex:998,backgroundColor:"#000000",opacity:"0.5"});lightbox.modifyStyles(),lightbox.showScreen(t)},showScreen:function(t){t.prependTo(document.body)},modifyStyles:function(){$(".lightbox").css({marginTop:"-261px",marginLeft:"-484px",top:"50%",left:"50%",position:"fixed",zIndex:"9999"})},trackClick:function(t){$.ajax({type:"POST",beforeSend:function(t){t.setRequestHeader("authorize",sessionAuthorize)},url:"click_track.html",success:function(t){console.log("click successfully tracked")}})},addId:function(t){$("span.rating").attr("id",t)},appendGame:function(t){var e='<iframe frameBorder="0" style="margin-left:10px;" src="'+t+'" height="504px" width="720"></iframe>';$(".game-holder").append(e)},removeGame:function(){$(".game-holder").empty()},closeLightbox:function(){$("div.lightbox-inner").on("click","a.lnk-close",function(t){t.preventDefault(),lightbox.lightboxHide(),lightbox.screenHide(),lightbox.removeGame()})},screenHide:function(){$("#modalscreen").remove()},lightboxHide:function(){$(".lightbox").hide(),$("span.rating_label").html("Help us rate this game"),$("span.rating").attr("class","rating rating_00")},lightboxShow:function(){$(".lightbox").show()}},rating={start:function(){$("div.game-info").on("mousemove","span.rating",function(t){{var e=t.pageX-$(this).offset().left;t.pageY-$(this).offset().top}e>"0"&&"12">e?$(this).attr("class","rating rating_05"):e>"12"&&"24">e?$(this).attr("class","rating rating_10"):e>"24"&&"36">e?$(this).attr("class","rating rating_15"):e>"36"&&"48">e?$(this).attr("class","rating rating_20"):e>"48"&&"60">e?$(this).attr("class","rating rating_25"):e>"60"&&"72">e?$(this).attr("class","rating rating_30"):e>"72"&&"84">e?$(this).attr("class","rating rating_35"):e>"84"&&"96">e?$(this).attr("class","rating rating_40"):e>"96"&&"108">e?$(this).attr("class","rating rating_45"):e>"108"&&"120">e&&$(this).attr("class","rating rating_50")}).on("mouseleave","span.rating",function(){$(this).attr("class","rating rating_00")}).on("click","span.rating",function(){var t=$(this).attr("id"),e=$(this).attr("class"),a=e.replace(/[^0-9]/g,"");rating.sendRating(t,a)})},sendRating:function(t,e){$.ajax({type:"POST",beforeSend:function(t){t.setRequestHeader("authorize",sessionAuthorize),rating.disableHandler()},url:"ajax/write_rating.html",success:function(t){}})},disableHandler:function(){$("div.game-info").off("mousemove","span.rating").off("mouseleave","span.rating").off("click","span.rating"),rating.endingEffects()},endingEffects:function(){$("span.rating_label").html("<strong>Thanks For Your Rating!</strong>")}};$(function(){$(".more_button").live("click",function(){var t=$(this).attr("id"),e=($(this).data("param1"),$(this).data("param2"),$(this).data("param3"),$(".game-block").length),a=$("#sort-games").val(),n=$("#by-software").val(),i=$("#game-type").val();return t?($("#load_more_"+t).attr("disabled","disabled"),$.ajax({type:"POST",url:"ajax/more_content.html",data:"getLastContentId="+t+"&getParam1="+a+"&getParam2="+n+"&getParam3="+i+"&numItems="+e,cache:!1,success:function(e){$(".free-games-block").append(e),$("#more_div"+t).remove()}})):$(".more_tab").html('<div class="more_button">No more games.</div>'),!1})}),$.ajax({type:"POST",url:"ajax/games_count.html",data:"getParam2=all&getParam3=all",cache:!1,success:function(t){$(".filter-panel .col:last-child").html(t)}}),$(document).ready(free.start),$(document).ready(lightbox.start),$(document).ready(function(){$(function(){$("#back-top").hide(),$(window).scroll(function(){$(this).scrollTop()>200?$("#back-top").fadeIn():$("#back-top").fadeOut()}),$("#back-top a").click(function(){return $("body,html").animate({scrollTop:0},800),!1})})});